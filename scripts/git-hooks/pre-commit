#!/bin/bash

echo "Running PHPStan..."
vendor/bin/phpstan analyze

if [ $? -ne 0 ]; then
    echo "PHPStan found issues. Commit aborted."
    exit 1
fi

echo "Running PHP-CS-Fixer..."
vendor/bin/php-cs-fixer fix --dry-run --diff --allow-risky=yes

if [ $? -ne 0 ]; then
    echo "PHP-CS-Fixer found formatting issues. Run 'vendor/bin/php-cs-fixer fix --allow-risky=yes' to fix them."
    exit 1
fi

exit 0
